<!DOCTYPE html>
<html>
<head>
    <title>æ™ºå›ŠAIFin - æ™ºèƒ½è´¢åŠ¡åŠ©æ‰‹</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* é€‰é¡¹å¡æ ·å¼ */
        .tab-container {
            margin: 20px 0;
        }
        
        .tab-buttons {
            display: flex;
            background: #f8f9fa;
            border-radius: 12px;
            padding: 5px;
            margin-bottom: 20px;
        }
        
        .tab-button {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: none;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .tab-button.active {
            background: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            color: #3498db;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* å¥—é¤çŒæ‰‹æ ·å¼ */
        .package-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 25px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            box-sizing: border-box;
        }
        
        .package-results {
            display: none;
            margin-top: 25px;
        }
        
        .package-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin: 15px 0;
        }
        
        .savings-badge {
            background: #2ecc71;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }
        
        /* é‡‘èè¯•è¡£é—´æ ·å¼ */
        .product-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }
        
        .product-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }
        
        .product-card.selected {
            border-color: #3498db;
            background: #f8f9fa;
        }
        
        .product-icon {
            font-size: 40px;
            margin-bottom: 15px;
        }
        
        .simulation-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 12px;
            margin: 25px 0;
            display: none;
        }
        
        .consumption-inputs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .input-group {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }
        
        .result-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ¯ æ™ºå›ŠAIFin</h1>
            <p>ä½ çš„æ™ºèƒ½è´¢åŠ¡å¥åº·åŠ©æ‰‹</p>
        </header>

        <!-- é€‰é¡¹å¡å¯¼èˆª -->
        <div class="tab-container">
            <div class="tab-buttons">
                <button class="tab-button active" onclick="switchTab('dream')">ğŸ’° æ¢¦æƒ³å‚¨è“„ç½</button>
                <button class="tab-button" onclick="switchTab('package')">ğŸ” AIå¥—é¤çŒæ‰‹</button>
                <button class="tab-button" onclick="switchTab('financial')">ğŸ‘” é‡‘èè¯•è¡£é—´</button>
            </div>
            
            <!-- æ¢¦æƒ³å‚¨è“„ç½å†…å®¹ -->
            <div id="dream-tab" class="tab-content active">
                <!-- ç»Ÿè®¡é¢æ¿ -->
                <div class="stats-panel">
                    <div class="stat-item">
                        <div class="stat-number" id="totalDreams">0</div>
                        <div class="stat-label">æ€»æ¢¦æƒ³æ•°</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="completedDreams">0</div>
                        <div class="stat-label">å·²å®Œæˆ</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="totalSaved">Â¥0</div>
                        <div class="stat-label">å·²å­˜å‚¨</div>
                    </div>
                </div>
                
                <!-- åˆ›å»ºæ¢¦æƒ³åŒºåŸŸ -->
                <div class="dream-creator">
                    <h3>åˆ›å»ºæ–°æ¢¦æƒ³</h3>
                    <input type="text" id="dreamName" placeholder="ä½ çš„æ¢¦æƒ³æ˜¯ä»€ä¹ˆï¼Ÿæ¯”å¦‚ï¼šSwitchæ¸¸æˆæœº">
                    <input type="number" id="dreamTarget" placeholder="éœ€è¦å¤šå°‘é’±ï¼Ÿæ¯”å¦‚ï¼š2000">
                    <button onclick="createDream()">åˆ›å»ºæ¢¦æƒ³</button>
                </div>

                <!-- æ˜¾ç¤ºæ¢¦æƒ³åˆ—è¡¨çš„åŒºåŸŸ -->
                <div id="dreamsContainer" class="dreams-container">
                    <p style="text-align: center; color: #666;">è¿˜æ²¡æœ‰æ¢¦æƒ³ï¼Œå¿«åˆ›å»ºä¸€ä¸ªå§ï¼</p>
                </div>

                <!-- è®°å½•æŒ‰é’® -->
                <div class="add-record">
                    <button onclick="showRecordModal()">+ è®°å½•å‚¨è“„</button>
                </div>
            </div>
            
            <!-- AIå¥—é¤çŒæ‰‹å†…å®¹ -->
            <div id="package-tab" class="tab-content">
                <div class="package-section">
                    <h3>ğŸ” AIå¥—é¤çŒæ‰‹</h3>
                    <p>æ™ºèƒ½åˆ†æä½ çš„æ‰‹æœºä½¿ç”¨ä¹ æƒ¯ï¼Œæ¨èæœ€çœé’±å¥—é¤</p>
                    
                    <div class="form-group">
                        <label>æ¯æœˆæµé‡ä½¿ç”¨ (GB)</label>
                        <input type="range" id="dataUsage" min="1" max="50" value="10">
                        <span id="dataValue">10 GB</span>
                    </div>
                    
                    <div class="form-group">
                        <label>æ¯æœˆé€šè¯æ—¶é•¿ (åˆ†é’Ÿ)</label>
                        <input type="range" id="callUsage" min="0" max="1000" value="200">
                        <span id="callValue">200 åˆ†é’Ÿ</span>
                    </div>
                    
                    <div class="form-group">
                        <label>æ¯æœˆçŸ­ä¿¡æ•°é‡</label>
                        <select id="smsUsage">
                            <option value="50">å¾ˆå°‘ (50æ¡ä»¥ä¸‹)</option>
                            <option value="200">ä¸€èˆ¬ (200æ¡å·¦å³)</option>
                            <option value="500">å¾ˆå¤š (500æ¡ä»¥ä¸Š)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>å½“å‰æœˆè´¹</label>
                        <input type="number" id="currentCost" placeholder="ä¾‹å¦‚ï¼š58" value="58">
                        <small>è¯·è¾“å…¥ä½ ç›®å‰æ¯æœˆæ”¯ä»˜çš„è´¹ç”¨</small>
                    </div>
                    
                    <div class="form-group">
                        <label>è¿è¥å•†åå¥½</label>
                        <select id="operatorPref">
                            <option value="any">ä¸é™è¿è¥å•†</option>
                            <option value="china_mobile">ä¸­å›½ç§»åŠ¨</option>
                            <option value="china_unicom">ä¸­å›½è”é€š</option>
                            <option value="china_telecom">ä¸­å›½ç”µä¿¡</option>
                        </select>
                    </div>
                    
                    <button onclick="analyzePackage()" style="width: 100%; padding: 15px; background: #e74c3c; color: white; border: none; border-radius: 8px; font-size: 16px; cursor: pointer;">
                        ğŸš€ AIæ™ºèƒ½åˆ†æ
                    </button>
                    
                    <div id="packageResults" class="package-results">
                        <!-- å¥—é¤æ¨èå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                    </div>
                </div>
            </div>
            
            <!-- é‡‘èè¯•è¡£é—´å†…å®¹ -->
            <div id="financial-tab" class="tab-content">
                <div class="package-section">
                    <h3>ğŸ‘” é‡‘èè¯•è¡£é—´</h3>
                    <p>åƒè¯•è¡£æœä¸€æ ·ä½“éªŒé‡‘èäº§å“ï¼Œæ‰¾åˆ°æœ€é€‚åˆä½ çš„é‚£ä¸€æ¬¾</p>
                    
                    <!-- äº§å“é€‰æ‹©åŒºåŸŸ -->
                    <div class="product-selection">
                        <div class="product-card" onclick="selectProduct('credit-card')">
                            <div class="product-icon">ğŸ’³</div>
                            <h3>è¿”ç°ä¿¡ç”¨å¡</h3>
                            <p>æ¶ˆè´¹è¿”ç°ï¼Œç§¯åˆ†å…‘æ¢ï¼Œé€‚åˆæ—¥å¸¸æ¶ˆè´¹</p>
                            <small>æ¨èæŒ‡æ•°: â­â­â­â­â­</small>
                        </div>
                        
                        <div class="product-card" onclick="selectProduct('investment')">
                            <div class="product-icon">ğŸ“ˆ</div>
                            <h3>ç†è´¢äº§å“</h3>
                            <p>ç¨³å¥æ”¶ç›Šï¼Œèµ„é‡‘å¢å€¼ï¼Œé€‚åˆé—²ç½®èµ„é‡‘</p>
                            <small>æ¨èæŒ‡æ•°: â­â­â­â­</small>
                        </div>
                        
                        <div class="product-card" onclick="selectProduct('student-loan')">
                            <div class="product-icon">ğŸ“</div>
                            <h3>æ•™è‚²è´·æ¬¾</h3>
                            <p>ä½æ¯è´·æ¬¾ï¼Œæ”¯æŒå­¦ä¸šï¼Œé€‚åˆæ·±é€ éœ€æ±‚</p>
                            <small>æ¨èæŒ‡æ•°: â­â­â­</small>
                        </div>
                    </div>

                    <!-- æ¨¡æ‹Ÿåˆ†æåŒºåŸŸ -->
                    <div id="simulationSection" class="simulation-section">
                        <h3 id="productTitle">äº§å“æ¨¡æ‹Ÿåˆ†æ</h3>
                        
                        <!-- æ¶ˆè´¹ä¹ æƒ¯è¾“å…¥ -->
                        <div class="consumption-inputs" id="consumptionInputs">
                            <!-- åŠ¨æ€ç”Ÿæˆè¾“å…¥æ¡† -->
                        </div>
                        
                        <button onclick="runSimulation()" style="width: 100%; padding: 15px; background: #e74c3c; color: white; border: none; border-radius: 8px; font-size: 16px; cursor: pointer;">
                            ğŸš€ å¼€å§‹æ¨¡æ‹Ÿ
                        </button>
                        
                        <!-- ç»“æœæ˜¾ç¤º -->
                        <div id="resultSection" style="display: none;">
                            <div class="result-card">
                                <h3>ğŸ’¡ æ¨¡æ‹Ÿç»“æœ</h3>
                                <div id="simulationResults">
                                    <!-- æ¨¡æ‹Ÿç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                                </div>
                            </div>
                            
                            <div style="text-align: center; margin: 20px 0;">
                                <button onclick="saveToDream()" style="background: #2ecc71; color: white; border: none; padding: 12px 24px; border-radius: 8px; font-size: 16px; cursor: pointer; margin: 10px;">
                                    ğŸ’° å°†èŠ‚çœå­˜å…¥æ¢¦æƒ³
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- è®°å½•å‚¨è“„çš„å¼¹çª— -->
    <div id="recordModal" class="modal">
        <div class="modal-content">
            <h3>ä¸ºæ¢¦æƒ³å­˜é’±</h3>
            
            <!-- æ¢¦æƒ³é€‰æ‹©ä¸‹æ‹‰èœå• -->
            <div class="form-group">
                <label for="dreamSelect">é€‰æ‹©æ¢¦æƒ³ï¼š</label>
                <select id="dreamSelect">
                    <!-- é€‰é¡¹å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </select>
            </div>
            
            <div class="form-group">
                <label for="recordAmount">å­˜å…¥é‡‘é¢ï¼š</label>
                <input type="number" id="recordAmount" placeholder="è¾“å…¥é‡‘é¢">
            </div>
            
            <div class="modal-actions">
                <button onclick="saveToDream()" class="save-btn">å­˜å…¥æ¢¦æƒ³</button>
                <button onclick="closeRecordModal()" class="cancel-btn">å–æ¶ˆ</button>
            </div>
        </div>
    </div>

    <!-- å¼•å…¥å›¾è¡¨åº“å’ŒJavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="script.js"></script>
    <script>
        // é€‰é¡¹å¡åˆ‡æ¢åŠŸèƒ½
        function switchTab(tabName) {
            // éšè—æ‰€æœ‰é€‰é¡¹å¡å†…å®¹
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // ç§»é™¤æ‰€æœ‰æŒ‰é’®çš„activeçŠ¶æ€
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
            });
            
            // æ˜¾ç¤ºé€‰ä¸­çš„é€‰é¡¹å¡å†…å®¹
            document.getElementById(tabName + '-tab').classList.add('active');
            
            // æ¿€æ´»é€‰ä¸­çš„æŒ‰é’®
            event.currentTarget.classList.add('active');
        }

        // AIå¥—é¤çŒæ‰‹åŠŸèƒ½
        document.getElementById('dataUsage').addEventListener('input', function() {
            document.getElementById('dataValue').textContent = this.value + ' GB';
        });

        document.getElementById('callUsage').addEventListener('input', function() {
            document.getElementById('callValue').textContent = this.value + ' åˆ†é’Ÿ';
        });

        // å¥—é¤æ•°æ®åº“
        const packageDatabase = [
            {
                name: "ç§»åŠ¨èŠ±å¡-é’æ˜¥ç‰ˆ",
                operator: "china_mobile",
                price: 29,
                data: 30,
                calls: 100,
                sms: 100,
                features: ["å®šå‘æµé‡", "æ ¡å›­ä¼˜æƒ "],
                link: "https://www.10086.cn",
                popularity: 95
            },
            {
                name: "è”é€šå¤§ç‹å¡",
                operator: "china_unicom", 
                price: 39,
                data: 40,
                calls: 200,
                sms: 200,
                features: ["è…¾è®¯ç³»å…æµ", "å…¨å›½é€šç”¨"],
                link: "https://www.10010.com",
                popularity: 92
            },
            {
                name: "ç”µä¿¡æ˜Ÿå¡",
                operator: "china_telecom",
                price: 35,
                data: 35,
                calls: 150,
                sms: 150,
                features: ["å¤´æ¡ç³»å…æµ", "äº²æƒ…ç½‘"],
                link: "https://www.189.cn",
                popularity: 88
            }
        ];

        function analyzePackage() {
            const userData = parseInt(document.getElementById('dataUsage').value);
            const userCalls = parseInt(document.getElementById('callUsage').value);
            const userSms = parseInt(document.getElementById('smsUsage').value);
            const currentCost = parseInt(document.getElementById('currentCost').value);
            const operatorPref = document.getElementById('operatorPref').value;
            
            if (!currentCost || currentCost <= 0) {
                alert('è¯·è¾“å…¥æ­£ç¡®çš„å½“å‰æœˆè´¹ï¼');
                return;
            }
            
            const matchedPackages = packageDatabase
                .filter(pkg => {
                    if (operatorPref !== 'any' && pkg.operator !== operatorPref) {
                        return false;
                    }
                    return pkg.data >= userData && pkg.calls >= userCalls;
                })
                .map(pkg => {
                    const monthlySavings = currentCost - pkg.price;
                    return {
                        ...pkg,
                        monthlySavings,
                        annualSavings: monthlySavings * 12
                    };
                })
                .filter(pkg => pkg.monthlySavings > 0)
                .sort((a, b) => b.monthlySavings - a.monthlySavings);
            
            displayPackageResults(matchedPackages, currentCost);
        }

        function displayPackageResults(packages, currentCost) {
            const resultsContainer = document.getElementById('packageResults');
            
            if (packages.length === 0) {
                resultsContainer.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #7f8c8d;">
                        <h4>ğŸ˜… æš‚æ— æ›´ä¼˜å¥—é¤</h4>
                        <p>åŸºäºä½ çš„ä½¿ç”¨ä¹ æƒ¯ï¼Œæˆ‘ä»¬æš‚æ—¶æ²¡æœ‰æ‰¾åˆ°æ¯”å½“å‰å¥—é¤æ›´åˆ’ç®—çš„é€‰æ‹©</p>
                        <p>å½“å‰æœˆè´¹ï¼š<strong>Â¥${currentCost}</strong></p>
                    </div>
                `;
            } else {
                let html = `
                    <div style="margin-bottom: 20px; padding: 15px; background: #ecf0f1; border-radius: 8px;">
                        <strong>å½“å‰å¥—é¤ï¼šÂ¥${currentCost}/æœˆ</strong>
                    </div>
                `;
                
                packages.forEach((pkg, index) => {
                    const rankEmoji = index === 0 ? 'ğŸ¥‡' : index === 1 ? 'ğŸ¥ˆ' : 'ğŸ¥‰';
                    const operatorNames = {
                        'china_mobile': 'ä¸­å›½ç§»åŠ¨',
                        'china_unicom': 'ä¸­å›½è”é€š', 
                        'china_telecom': 'ä¸­å›½ç”µä¿¡'
                    };
                    
                    html += `
                        <div class="package-card">
                            <div style="display: flex; justify-content: space-between; align-items: start;">
                                <div>
                                    <h3 style="margin: 0 0 10px 0;">${rankEmoji} ${pkg.name}</h3>
                                    <p style="margin: 5px 0; opacity: 0.9;">${operatorNames[pkg.operator]}</p>
                                </div>
                                <div style="text-align: right;">
                                    <div style="font-size: 24px; font-weight: bold;">Â¥${pkg.price}</div>
                                    <div style="font-size: 14px; opacity: 0.9;">/æœˆ</div>
                                </div>
                            </div>
                            
                            <div style="margin: 15px 0; padding: 15px; background: rgba(255,255,255,0.2); border-radius: 8px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                    <span>ğŸ“± æµé‡ï¼š${pkg.data}GB</span>
                                    <span>ğŸ“ é€šè¯ï¼š${pkg.calls}åˆ†é’Ÿ</span>
                                </div>
                                <div style="display: flex; justify-content: space-between;">
                                    <span>ğŸ’¬ çŸ­ä¿¡ï¼š${pkg.sms}æ¡</span>
                                    <span class="savings-badge">æœˆçœÂ¥${pkg.monthlySavings}</span>
                                </div>
                            </div>
                            
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <strong style="color: #2ecc71;">æ¯æœˆèŠ‚çœï¼šÂ¥${pkg.monthlySavings}</strong>
                                    <br>
                                    <small>ä¸€å¹´èŠ‚çœï¼šÂ¥${pkg.annualSavings}</small>
                                </div>
                                <button onclick="window.open('${pkg.link}', '_blank')" style="background: white; color: #e74c3c; border: none; padding: 10px 20px; border-radius: 6px; font-weight: bold; cursor: pointer;">
                                    ç«‹å³åŠç†
                                </button>
                            </div>
                        </div>
                    `;
                });
                
                resultsContainer.innerHTML = html;
            }
            
            resultsContainer.style.display = 'block';
            resultsContainer.scrollIntoView({ behavior: 'smooth' });
        }

        // é‡‘èè¯•è¡£é—´åŠŸèƒ½
        const financialProducts = {
            'credit-card': {
                name: 'è¿”ç°ä¿¡ç”¨å¡',
                type: 'credit-card',
                features: ['é¤é¥®5%è¿”ç°', 'è¶…å¸‚3%è¿”ç°', 'å…¶ä»–1%è¿”ç°', 'å…å¹´è´¹']
            },
            'investment': {
                name: 'ä½™é¢å®ç†è´¢',
                type: 'investment',
                features: ['çµæ´»å­˜å–', 'å¹´åŒ–æ”¶ç›Š2%', '1å…ƒèµ·æŠ•', 'é£é™©æä½'],
                expectedReturn: 0.02
            },
            'student-loan': {
                name: 'å›½å®¶åŠ©å­¦è´·æ¬¾',
                type: 'loan',
                features: ['å…æ¯æœŸ', 'æ¯•ä¸šåè¿˜æ¬¾', 'æ”¿åºœè´´æ¯', 'æ‰‹ç»­ç®€ä¾¿'],
                interestRate: 0.04,
                gracePeriod: 48
            }
        };

        let selectedProduct = null;

        function selectProduct(productType) {
            selectedProduct = financialProducts[productType];
            
            document.querySelectorAll('.product-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
            
            const simulationSection = document.getElementById('simulationSection');
            simulationSection.style.display = 'block';
            
            document.getElementById('productTitle').textContent = `æ¨¡æ‹Ÿåˆ†æï¼š${selectedProduct.name}`;
            
            generateInputs(selectedProduct.type);
            document.getElementById('resultSection').style.display = 'none';
        }

        function generateInputs(productType) {
            const container = document.getElementById('consumptionInputs');
            let html = '';
            
            switch(productType) {
                case 'credit-card':
                    html = `
                        <div class="input-group">
                            <label>æ¯æœˆé¤é¥®æ¶ˆè´¹ (å…ƒ)</label>
                            <input type="number" id="diningSpend" value="800" min="0">
                        </div>
                        <div class="input-group">
                            <label>æ¯æœˆè¶…å¸‚æ¶ˆè´¹ (å…ƒ)</label>
                            <input type="number" id="grocerySpend" value="500" min="0">
                        </div>
                        <div class="input-group">
                            <label>æ¯æœˆå…¶ä»–æ¶ˆè´¹ (å…ƒ)</label>
                            <input type="number" id="otherSpend" value="1000" min="0">
                        </div>
                    `;
                    break;
                    
                case 'investment':
                    html = `
                        <div class="input-group">
                            <label>æŠ•èµ„é‡‘é¢ (å…ƒ)</label>
                            <input type="number" id="investmentAmount" value="5000" min="1">
                        </div>
                        <div class="input-group">
                            <label>æŠ•èµ„æœŸé™ (æœˆ)</label>
                            <input type="number" id="investmentMonths" value="12" min="1">
                        </div>
                    `;
                    break;
                    
                case 'student-loan':
                    html = `
                        <div class="input-group">
                            <label>è´·æ¬¾é‡‘é¢ (å…ƒ)</label>
                            <input type="number" id="loanAmount" value="8000" min="1000">
                        </div>
                        <div class="input-group">
                            <label>è´·æ¬¾æœŸé™ (æœˆ)</label>
                            <input type="number" id="loanMonths" value="24" min="6">
                        </div>
                    `;
                    break;
            }
            
            container.innerHTML = html;
        }

        function runSimulation() {
            if (!selectedProduct) {
                alert('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªé‡‘èäº§å“ï¼');
                return;
            }
            
            let results = {};
            
            switch(selectedProduct.type) {
                case 'credit-card':
                    results = simulateCreditCard();
                    break;
                case 'investment':
                    results = simulateInvestment();
                    break;
                case 'student-loan':
                    results = simulateLoan();
                    break;
            }
            
            displayFinancialResults(results);
            document.getElementById('resultSection').style.display = 'block';
            document.getElementById('resultSection').scrollIntoView({ behavior: 'smooth' });
        }

        function simulateCreditCard() {
            const diningSpend = parseFloat(document.getElementById('diningSpend').value) || 0;
            const grocerySpend = parseFloat(document.getElementById('grocerySpend').value) || 0;
            const otherSpend = parseFloat(document.getElementById('otherSpend').value) || 0;
            
            const monthlyCashback = 
                (diningSpend * 0.05) + 
                (grocerySpend * 0.03) + 
                (otherSpend * 0.01);
            
            const annualCashback = monthlyCashback * 12;
            const totalSpend = diningSpend + grocerySpend + otherSpend;
            
            return {
                type: 'credit-card',
                monthlySavings: monthlyCashback,
                annualSavings: annualCashback,
                totalSpend: totalSpend,
                cashbackRate: (monthlyCashback / totalSpend * 100).toFixed(1)
            };
        }

        function simulateInvestment() {
            const amount = parseFloat(document.getElementById('investmentAmount').value) || 0;
            const months = parseFloat(document.getElementById('investmentMonths').value) || 0;
            
            const monthlyReturn = selectedProduct.expectedReturn / 12;
            const totalReturn = amount * monthlyReturn * months;
            
            return {
                type: 'investment',
                investmentAmount: amount,
                investmentPeriod: months,
                expectedReturn: totalReturn,
                returnRate: (selectedProduct.expectedReturn * 100).toFixed(1)
            };
        }

        function simulateLoan() {
            const amount = parseFloat(document.getElementById('loanAmount').value) || 0;
            const months = parseFloat(document.getElementById('loanMonths').value) || 0;
            
            const monthlyInterest = selectedProduct.interestRate / 12;
            const totalInterest = amount * monthlyInterest * (months - selectedProduct.gracePeriod);
            
            return {
                type: 'loan',
                loanAmount: amount,
                loanPeriod: months,
                interestSavings: Math.max(0, totalInterest),
                gracePeriod: selectedProduct.gracePeriod
            };
        }

        function displayFinancialResults(results) {
            const container = document.getElementById('simulationResults');
            let html = '';
            
            switch(results.type) {
                case 'credit-card':
                    html = `
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 15px 0;">
                            <div style="text-align: center;">
                                <div style="font-size: 14px; opacity: 0.9;">æœˆå‡è¿”ç°</div>
                                <div style="font-size: 24px; font-weight: bold; color: #2ecc71;">Â¥${results.monthlySavings.toFixed(2)}</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 14px; opacity: 0.9;">å¹´è¿”ç°é‡‘é¢</div>
                                <div style="font-size: 24px; font-weight: bold; color: #2ecc71;">Â¥${results.annualSavings.toFixed(2)}</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 14px; opacity: 0.9;">ç»¼åˆè¿”ç°ç‡</div>
                                <div style="font-size: 24px; font-weight: bold; color: #3498db;">${results.cashbackRate}%</div>
                            </div>
                        </div>
                        <p>åŸºäºä½ çš„æ¶ˆè´¹ä¹ æƒ¯ï¼Œè¿™å¼ ä¿¡ç”¨å¡æ¯å¹´å¯ä¸ºä½ èŠ‚çœ <strong>Â¥${results.annualSavings.toFixed(2)}</strong></p>
                    `;
                    break;
                    
                case 'investment':
                    html = `
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 15px 0;">
                            <div style="text-align: center;">
                                <div style="font-size: 14px; opacity: 0.9;">æŠ•èµ„é‡‘é¢</div>
                                <div style="font-size: 24px; font-weight: bold; color: #3498db;">Â¥${results.investmentAmount.toFixed(2)}</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 14px; opacity: 0.9;">é¢„æœŸæ”¶ç›Š</div>
                                <div style="font-size: 24px; font-weight: bold; color: #2ecc71;">Â¥${results.expectedReturn.toFixed(2)}</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 14px; opacity: 0.9;">å¹´åŒ–æ”¶ç›Šç‡</div>
                                <div style="font-size: 24px; font-weight: bold; color: #3498db;">${results.returnRate}%</div>
                            </div>
                        </div>
                        <p>${results.investmentPeriod}ä¸ªæœˆåï¼Œä½ çš„æŠ•èµ„é¢„è®¡å¢å€¼ <strong>Â¥${results.expectedReturn.toFixed(2)}</strong></p>
                    `;
                    break;
                    
                case 'student-loan':
                    html = `
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 15px 0;">
                            <div style="text-align: center;">
                                <div style="font-size: 14px; opacity: 0.9;">è´·æ¬¾é‡‘é¢</div>
                                <div style="font-size: 24px; font-weight: bold; color: #3498db;">Â¥${results.loanAmount.toFixed(2)}</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 14px; opacity: 0.9;">åˆ©æ¯èŠ‚çœ</div>
                                <div style="font-size: 24px; font-weight: bold; color: #2ecc71;">Â¥${results.interestSavings.toFixed(2)}</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 14px; opacity: 0.9;">å…æ¯æœŸ</div>
                                <div style="font-size: 24px; font-weight: bold; color: #e74c3c;">${results.gracePeriod}ä¸ªæœˆ</div>
                            </div>
                        </div>
                        <p>ä¸ä¼ ç»Ÿè´·æ¬¾ç›¸æ¯”ï¼Œè¿™ä¸ªæ•™è‚²è´·æ¬¾ä¸ºä½ èŠ‚çœ <strong>Â¥${results.interestSavings.toFixed(2)}</strong> çš„åˆ©æ¯æ”¯å‡º</p>
                    `;
                    break;
            }
            
            container.innerHTML = html;
        }

        function saveToDream() {
            alert('ğŸ’° åŠŸèƒ½æç¤ºï¼šè¿™é‡Œå¯ä»¥å°†èŠ‚çœçš„é‡‘é¢ç›´æ¥å­˜å…¥ä½ çš„æ¢¦æƒ³å‚¨è“„ç½ï¼');
        }
    </script>
</body>
</html>